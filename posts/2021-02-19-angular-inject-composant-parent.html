---
layout: layout.html
base: /
tags: ['blog', 'angular']
title: Communication entre composants
category: home
permalink: index.html
image: https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Angular_full_color_logo.svg/langfr-220px-Angular_full_color_logo.svg.png
description: Angular propose de multiples syntaxes pour partager de l'informations entre des composants. Mais connaissez-vous celle-ci ?
datetime: 24-03-2021
dateLiteral: 24 Mars 2021
---

<article class="h-entry">
    <header>
        <h2 class="p-name">Communication entre composants</h2>
        <p class="dt-published">
            <time datetime="24-03-2021">24 Mars 2021</time>
        </p>
    </header>

    <div class="p-summary">
        <p>
            Angular propose de multiples syntaxes pour partager de l'informations entre des composants.
            Mais connaissez-vous celle-ci ?
        </p>
    </div>

    <div class="e-content">
        <p>Nous avons l'habitude d'utiliser l'injection de dépendances avec Angular afin de pouvoir notamment
            partager de l'information. Mais saviez-vous qu'il était également possible de récupérer directement le
            composant parent directement dans la classe TypeScript d'un autre composant ?
        </p>

        <h3>Cas d'utilisation</h3>
        <p>Lorsque nous devons faire transiter de l'informations entre deux composants indirects, nous pensons
        immédiatement à deux solutions :</p>

        <ul>
            <li>Mettre en place un service</li>
            <li>Installer et configurer l'artillerie lourde comme par exemple NgRX</li>
        </ul>

        <p>
            Je n'ai absolument rien contre ces deux solutions, mais pour certains cas, cela n'est pas nécessaire. Si deux composants
            sont par exemple toujours utilisés ensemble, pour une même fonctionnalité (le découpage en composants a été
            réalisé juste pour faciliter la lecture et la maintenabilité de notre code), nous pouvons, à tout moment, injecter
            depuis un composant enfant une instance de l'un de ces composants parent (direct ou indirect).
        </p>


        <h3>Mise en place</h3>
        <p>Pour cela, nous allons utiliser la même syntaxe que pour l'injection de service : en définissant un nouveau
        paramètre dans le constructeur du composant. Si vous êtes familier avec le fonctionnement d'Angular, vous savez déjà
        qu'Angular se base sur le type du paramètre afin de déterminer quel objet doit être injecté. Dans la cas présenté dans cet article,
        le type sera tout simplement celui du ou des composants à injecter. </p>

        <p>
            Si nous avons par exemple un composant <strong>TabComponent</strong> dans lequel nous souhaitons injecter le composant parent
            <strong>TabsComponent</strong>, il suffit d'écrire le code suivant :
        </p>
        <pre>
@Component({ ...}}
export class TabComponent {
    constructor(private list: TabsComponent) {}
}
        </pre>

        <p>
            Une fois cette injection réalisée, nous pouvons utiliser les méthodes et variables de l'instance du composant <strong>TabsComponent</strong>. Cette pratique
            est notamment utilisée dans le composant <strong>Accordion</strong> de la librairie <strong>ng-bootstrap</strong>. En effet, dans la directive <strong>NgPanelToggle</strong>
            (en charge d'ouvrir et de fermer le contenu affiché), le composant <strong>Accordion</strong> lui-même est injecté afin de pouvoir appeler sa méthode <strong>toggle</strong>
            quand l'utilisateur clique sur le bouton.
        </p>

        <pre>
@Directive({
  selector: 'button[ngbPanelToggle]',
  host: {
    'type': 'button',
    '[disabled]': 'panel.disabled',
    '[class.collapsed]': '!panel.isOpen',
    '[attr.aria-expanded]': 'panel.isOpen',
    '[attr.aria-controls]': 'panel.id',
    '(click)': 'accordion.toggle(panel.id)'
  }
})
export class NgbPanelToggle {
  static ngAcceptInputType_ngbPanelToggle: NgbPanel | '';

  @Input()
  set ngbPanelToggle(panel: NgbPanel) {
    if (panel) {
      this.panel = panel;
    }
  }

  constructor(public accordion: NgbAccordion, @Optional() @Host() public panel: NgbPanel) {}
}
        </pre>
        <p>
            Ceci est mon premier article sur Angular (en fait le tout premier article de ce blog). D'autres articles sont
            prévus. Donc n'hésitez pas à revenir les lire.
        </p>
    </div>


</article>
