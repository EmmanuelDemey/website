---
layout: layout.html
base: /
tags: ["blog"]
title: Inclure des r√®gles custom dans Sonar
category: home
permalink: custom-sonar-rules.html
description: Dans cet article, je vais expliquer comment nous pouvons inclure des r√®gles custom Sonar depuis notre CI
datetime: 28-03-2023
dateLiteral: 28 Mars 2023
---

<article class="h-entry">
  <header aria-label="Donn√©es de l'article">
    <h2 class="p-name">Inclure des r√®gles custom dans Sonar</h2>
    <p class="dt-published">
      <time datetime="22-08-2022">28 Mars 2023</time>
    </p>
  </header>

  <div class="p-summary">
    <p>
        Dans cet article, je vais expliquer comment nous pouvons inclure des r√®gles custom Sonar depuis notre CI.
    </p>
  </div>

  <div class="e-content">
    <p>
       Il y a quelques semaines, j'ai cr√©√© un module NPm permettant d'estimer l'impact environnemental d'un service num√©rique, en se basant sur les calculs r√©alis√©s
        par le site EcoIndex.fr ou encore le plugin GreenIT Analysis. Voici <a href="https://github.com/EmmanuelDemey/eco-index-audit">le repository Github de mon petit projet üòÅ</a>
       </s>
    </p>

    <p>
       Une question √©tait toujours en attente pour l'un de mes clients qui utilisait mon module. <strong>Comment int√©grer ces r√©sultats dans Sonar ?</strong>
    </p>

    <p>
        Le but de petit article est de vous annoncer que c'est tout √† fait possible avec Sonar d'inclure des r√®gles custom. La seule chose √† respecter est de cr√©er un fichier JSON
        respectant cette structure.
    </p>
    <pre>
        <code class="language-json">
{ 
    "issues": [
        {
        "engineId": "name-of-your-plugin",
        "ruleId": "name-of-the-rule",
        "severity":"MAJOR",
        "type":"CODE_SMELL",
        "primaryLocation": {
            "message": "Error message ...",
            "filePath": "src/employee.js"
        },
        "effortMinutes": 20
        }
    ]
}
        </code>
    </pre>
    
    <p>
        Ceci est un exemple basique de fichier. Des param√®tres suppl√©mentaires peuvent y √™tre ajout√©s: comme par exemple les num√©ros de lignes ou l'erreur est detect√©e. La 
        seule information importante est la propri√©t√© <strong>filePath</strong> qui doit pointer vers un fichier connu par Sonar. Si ce n'est pas le cas, Sonar n'affichera pas 
        votre r√®gle custom. 
    </p>

    <p>
        Une fois ce fichier g√©n√©r√© par vos soins, il suffit de l'inclure dans le fihier de configuration Sonar, et le tour est jou√©...
    </p>
    <pre>
        <code>
sonar.projectKey=training:external-issues
sonar.projectName=Training: External issues import

sonar.externalIssuesReportPaths=issues.json
        </code>
    </pre>
</div>
</article>
